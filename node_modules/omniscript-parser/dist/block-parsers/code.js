"use strict";
// File: omniscript-core/parser/src/block-parsers/code.ts
// What: Parser for @code blocks for syntax-highlighted code
// Why: Extract language, code content, caption, line numbers, and highlighting
// Related: types.ts, lexer/index.ts
Object.defineProperty(exports, "__esModule", { value: true });
exports.parseCodeBlock = parseCodeBlock;
const lexer_1 = require("../lexer");
const validation_1 = require("../utils/validation");
function parseCodeBlock(content) {
    const props = (0, lexer_1.parseKV)(content);
    const codeBlock = {
        type: 'osfcode',
        language: (0, validation_1.validateString)(props.language, 'text'),
        code: (0, validation_1.validateString)(props.code, ''),
    };
    // Add optional properties only if present
    if (props.caption && typeof props.caption === 'string') {
        codeBlock.caption = props.caption;
    }
    if (typeof props.lineNumbers === 'boolean') {
        codeBlock.lineNumbers = props.lineNumbers;
    }
    if (Array.isArray(props.highlight)) {
        codeBlock.highlight = props.highlight;
    }
    return codeBlock;
}
//# sourceMappingURL=code.js.map